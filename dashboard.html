<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>USDT Miner Dashboard</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: radial-gradient(circle, #0b2618, #163d2a);
      color: #fff;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }
    .container {
      background: rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(15px);
      border-radius: 15px;
      padding: 15px 20px 45px 20px;
      box-shadow: 0 0 30px rgba(38, 161, 123, 0.5);
      max-width: 320px;
      width: 90%;
      text-align: center;
      position: relative;
      font-size: 0.85rem;
      user-select: none;
    }
    h2 {
      color: #26a17b;
      margin-bottom: 8px;
      font-size: 1.4rem;
      font-weight: 600;
    }
    .balance {
      font-size: 1.2rem;
      margin: 10px 0 15px 0;
      color: #26a17b;
      letter-spacing: 0.02em;
      font-weight: 600;
      user-select: text;
    }
    button {
      background-color: #26a17b;
      border: none;
      padding: 7px 0;
      border-radius: 6px;
      color: #fff;
      font-size: 0.95rem;
      cursor: pointer;
      width: 100%;
      transition: background 0.3s ease;
      font-weight: 600;
      user-select: none;
    }
    button:hover:not(:disabled) {
      background-color: #1e7d60;
    }
    button:disabled {
      background-color: #145037;
      cursor: not-allowed;
    }
    .section {
      margin-top: 15px;
      text-align: left;
    }
    .section h4 {
      margin-bottom: 8px;
      border-bottom: 1px solid #26a17b;
      padding-bottom: 4px;
      color: #26a17b;
      font-size: 1rem;
      font-weight: 600;
    }
    .history {
      background: #0a261a;
      padding: 8px;
      border-radius: 5px;
      max-height: 110px;
      overflow-y: auto;
      font-size: 0.75rem;
      color: #a8d5c8;
      line-height: 1.3;
      user-select: text;
    }
    .referral-section {
      margin-top: 15px;
      text-align: left;
    }
    .referral-section label {
      display: block;
      margin-bottom: 4px;
      font-weight: 600;
      color: #26a17b;
      font-size: 0.9rem;
    }
    .referral-section input {
      width: 100%;
      padding: 6px;
      border-radius: 6px;
      border: none;
      font-size: 0.9rem;
      margin-bottom: 5px;
      background-color: #103925;
      color: #d0f0e6;
      box-sizing: border-box;
    }
    .referral-section input::placeholder {
      color: #7ab79a;
    }
    .referral-section button {
      width: auto;
      padding: 6px 12px;
      font-size: 0.9rem;
      margin-top: 0;
      background-color: #26a17b;
      color: #fff;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 600;
      user-select: none;
    }
    .referral-section button:hover {
      background-color: #1e7d60;
    }
    .referral-warning {
      font-size: 0.75rem;
      color: #99d8b0;
      margin-top: 3px;
      line-height: 1.2;
      display: none;
    }
    .whatsapp-btn {
      position: absolute;
      bottom: 12px;
      left: 50%;
      transform: translateX(-50%);
      background: #25d366;
      color: white;
      font-weight: 600;
      padding: 5px 14px;
      border-radius: 24px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 0.85rem;
      text-decoration: none;
      box-shadow: 0 4px 10px rgba(37, 211, 102, 0.5);
      user-select: none;
      transition: background-color 0.3s ease;
      border: none;
      outline: none;
      white-space: nowrap;
      min-width: 160px;
      justify-content: center;
    }
    .whatsapp-btn:hover {
      background-color: #1ebe57;
    }
    .whatsapp-icon {
      width: 16px;
      height: 16px;
      fill: white;
    }
    #notification {
      position: fixed;
      top: 12px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(38, 161, 123, 0.9);
      color: #fff;
      padding: 8px 20px;
      border-radius: 18px;
      font-weight: 600;
      font-size: 0.9rem;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.6s ease;
      z-index: 9999;
      max-width: 90vw;
      white-space: nowrap;
      box-shadow: 0 0 15px rgba(38, 161, 123, 0.7);
      user-select: none;
    }
    @media (max-width: 400px) {
      .container {
        max-width: 280px;
        padding: 12px 16px 45px 16px;
        font-size: 0.8rem;
      }
      h2 {
        font-size: 1.25rem;
      }
      .balance {
        font-size: 1rem;
      }
      button, .referral-section input, .referral-section button {
        font-size: 0.85rem;
      }
      .whatsapp-btn {
        font-size: 0.8rem;
        padding: 4px 12px;
        min-width: 140px;
        gap: 4px;
      }
      .history {
        max-height: 90px;
        font-size: 0.7rem;
      }
    }
  </style>
</head>
<body>

  <div id="notification"></div>

  <div class="container" role="main" aria-label="User Dashboard">
    <h2>EARN USDT</h2>
    <div class="balance" aria-live="polite" aria-atomic="true">Balance: <span id="balance">0.00000000</span> USDT</div>
    <button id="withdraw-btn" disabled aria-disabled="true" aria-label="Withdraw funds">Withdraw</button>

    <div class="section" aria-label="Withdrawal History">
      <h4>Withdraw History</h4>
      <div class="history" id="withdraw-history" tabindex="0">No withdrawals yet.</div>
    </div>

    <div class="referral-section" aria-label="Referral code submission">
      <label for="referralUser">Enter referrer username</label>
      <input type="text" id="referralUser" placeholder="Referrer username" aria-describedby="referral-warning" autocomplete="off" />
      <button id="sendReferralBtn" aria-label="Submit referrer username">Send Referral Info</button>
      <div class="referral-warning" id="referral-warning" role="alert" aria-live="assertive">
        ⚠️ Please enter correct referred username. At withdrawal stage your account will be reviewed fully. If we find any violation of fake referrals your account will be banned.
      </div>
    </div>

    <button class="whatsapp-btn" id="whatsappBtn" title="Contact on WhatsApp" aria-label="Contact support on WhatsApp">
      <svg class="whatsapp-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true">
        <path d="M20.52 3.48A11.875 11.875 0 0012 0C5.373 0 0 5.373 0 12a11.9 11.9 0 001.577 6.04L0 24l5.98-1.566A11.88 11.88 0 0012 24c6.627 0 12-5.373 12-12 0-3.197-1.25-6.205-3.48-8.52zm-8.54 17.47c-1.93 0-3.82-.51-5.44-1.48l-.39-.23-3.55.93.95-3.46-.25-.39a9.72 9.72 0 01-1.49-5.43c0-5.37 4.36-9.73 9.73-9.73 2.6 0 5.05 1.01 6.9 2.85a9.678 9.678 0 012.84 6.91c0 5.38-4.35 9.74-9.72 9.74zm5.27-7.21c-.29-.15-1.7-.84-1.96-.94-.26-.1-.45-.15-.64.15s-.73.94-.9 1.13c-.17.19-.34.22-.63.08-.29-.15-1.23-.45-2.34-1.44-.87-.77-1.45-1.72-1.62-2.01-.17-.29-.02-.44.13-.59.13-.13.29-.34.43-.51.14-.17.19-.29.29-.48.1-.19.05-.35-.02-.5-.06-.15-.63-1.52-.86-2.08-.23-.56-.46-.49-.64-.5l-.54-.01c-.18 0-.48.07-.73.35s-.96.94-.96 2.28c0 1.33.98 2.62 1.12 2.8.14.18 1.94 2.96 4.7 4.15.66.28 1.17.45 1.57.58.66.22 1.26.19 1.74.12.53-.08 1.7-.69 1.94-1.36.24-.66.24-1.22.17-1.36-.07-.13-.26-.21-.54-.36z"/>
      </svg>
      Contact on WhatsApp
    </button>
  </div>

  <script>
    // Setup variables
    let balance = parseFloat(localStorage.getItem('usdt_balance')) || 0;
    let referralUsed = localStorage.getItem('usdt_referral_used') || null;
    let referralRewarded = localStorage.getItem('usdt_referral_rewarded') === 'true';

    // Elements
    const balanceEl = document.getElementById('balance');
    const withdrawBtn = document.getElementById('withdraw-btn');
    const withdrawHistory = document.getElementById('withdraw-history');
    const referralInput = document.getElementById('referralUser');
    const referralBtn = document.getElementById('sendReferralBtn');
    const referralWarning = document.getElementById('referral-warning');
    const notificationEl = document.getElementById('notification');
    const whatsappBtn = document.getElementById('whatsappBtn');

    // Format number to 8 decimals
    function formatBalance(val) {
      return val.toFixed(8);
    }

    // Update balance UI and storage
    function updateBalanceUI() {
      balanceEl.textContent = formatBalance(balance);
      if (balance >= 3000) {
        withdrawBtn.disabled = false;
        withdrawBtn.setAttribute('aria-disabled', 'false');
      } else {
        withdrawBtn.disabled = true;
        withdrawBtn.setAttribute('aria-disabled', 'true');
      }
      localStorage.setItem('usdt_balance', balance.toString());
    }

    // Simulate mining: add 1 USDT every 2 minutes smoothly
    let miningInterval = 2000; // We use 2 seconds for smooth increment in example
    const incrementAmount = 1;
    const totalInterval = 2 * 60 * 1000; // 2 minutes in ms
    let incrementStep = incrementAmount / (totalInterval / miningInterval); // small increments every 2s

    function mineStep() {
      balance += incrementStep;
      if (balance > 99999999) balance = 99999999; // sanity max limit
      updateBalanceUI();
    }

    // Start mining loop
    setInterval(mineStep, miningInterval);

    // Withdraw button click redirects to withdraw.html if enabled
    withdrawBtn.addEventListener('click', () => {
      if (balance >= 3000) {
        window.location.href = 'withdraw.html';
      }
    });

    // Referral submission
    referralBtn.addEventListener('click', () => {
      const referralName = referralInput.value.trim();
      if (!referralName) {
        referralWarning.style.display = 'block';
        return;
      }
      if (referralUsed) {
        alert('Referral code already used.');
        return;
      }
      // Example simple validation: referral can't be same as user (for demo)
      const currentUser = 'user'; // Replace with actual username logic if available
      if (referralName.toLowerCase() === currentUser.toLowerCase()) {
        referralWarning.style.display = 'block';
        return;
      }
      referralWarning.style.display = 'none';
      referralUsed = referralName;
      localStorage.setItem('usdt_referral_used', referralUsed);

      if (!referralRewarded) {
        // Give 200 USDT to user & referrer
        balance += 200;
        localStorage.setItem('usdt_balance', balance.toString());
        referralRewarded = true;
        localStorage.setItem('usdt_referral_rewarded', 'true');
        alert(`Referral accepted! You and ${referralName} get 200 USDT bonus.`);
        updateBalanceUI();
      }
    });

    // Notifications array (random withdrawals)
    const notifications = [
      "User123 withdrew 150 USDT",
      "Alice just withdrew 50 USDT",
      "Bob withdrew 1000 USDT",
      "Charlie just withdrew 300 USDT",
      "Diana withdrew 2000 USDT",
      "Eve just withdrew 750 USDT",
      "Frank withdrew 400 USDT",
      "Grace just withdrew 125 USDT"
    ];

    function showNotification(msg) {
      notificationEl.textContent = msg;
      notificationEl.style.opacity = '1';
      notificationEl.style.pointerEvents = 'auto';
      setTimeout(() => {
        notificationEl.style.opacity = '0';
        notificationEl.style.pointerEvents = 'none';
      }, 3000);
    }

    // Show notifications every 5 seconds with fade effect
    setInterval(() => {
      const msg = notifications[Math.floor(Math.random() * notifications.length)];
      showNotification(msg);
    }, 5000);

    // Initial UI update
    updateBalanceUI();

    // WhatsApp button link - replace with your actual number and message
    whatsappBtn.addEventListener('click', () => {
      const phoneNumber = '1234567890'; // Put your WhatsApp number here without + or dashes
      const message = encodeURIComponent('Hello! I need support with USDT Miner.');
      const url = `https://wa.me/${phoneNumber}?text=${message}`;
      window.open(url, '_blank');
    });
  </script>
</body>
</html>
